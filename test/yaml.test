# name: test/yaml.test
# description: test yaml extension
# group: [test]

# Before we load the extension, this will fail
statement error
SELECT yaml('name: John');
----
Catalog Error: Scalar Function with name yaml does not exist!

# Require statement will ensure this test is run with this extension loaded
require yaml

# Test yaml() constructor function with valid YAML
query I
SELECT yaml('name: John');
----
{name: John}

# Test yaml() constructor function with complex YAML
query I
SELECT yaml('{"name": "John", "age": 30}');
----
{name: John, age: 30}

# Test yaml() with quoting.
query I
SELECT yaml('{"name": "Doe, John", "age": 30}');
----
{name: "Doe, John", age: 30}

# Test yaml() constructor function with invalid YAML should fail
statement error
SELECT yaml('invalid: yaml: content:');
----
